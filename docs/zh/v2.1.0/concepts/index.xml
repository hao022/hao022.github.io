<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>概念 on HUATUO 文档中心</title>
    <link>https://huatuo.tech/docs/zh/v2.1.0/concepts/</link>
    <description>Recent content in 概念 on HUATUO 文档中心</description>
    <generator>Hugo</generator>
    <language>zh</language>
    <atom:link href="https://huatuo.tech/docs/zh/v2.1.0/concepts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>采集框架</title>
      <link>https://huatuo.tech/docs/zh/v2.1.0/concepts/event-metrics-mode/</link>
      <pubDate>Wed, 03 Dec 2025 00:00:00 +0000</pubDate>
      <guid>https://huatuo.tech/docs/zh/v2.1.0/concepts/event-metrics-mode/</guid>
      <description>&lt;p&gt;底层采集器提供三种数据采集模式：&lt;code&gt;autotracing&lt;/code&gt;、&lt;code&gt;event&lt;/code&gt; 和 &lt;code&gt;metrics&lt;/code&gt;，分别针对不同的监控场景和需求，帮助用户全面掌握系统的运行状态。&lt;/p&gt;&#xA;&lt;h2 id=&#34;采集模式对比&#34;&gt;采集模式对比&lt;a class=&#34;td-heading-self-link&#34; href=&#34;#%e9%87%87%e9%9b%86%e6%a8%a1%e5%bc%8f%e5%af%b9%e6%af%94&#34; aria-label=&#34;Heading self-link&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;模式&lt;/th&gt;&#xA;          &lt;th&gt;类型&lt;/th&gt;&#xA;          &lt;th&gt;触发条件&lt;/th&gt;&#xA;          &lt;th&gt;数据输出&lt;/th&gt;&#xA;          &lt;th&gt;适用场景&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;Autotracing&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;异常事件驱动&lt;/td&gt;&#xA;          &lt;td&gt;系统异常时触发&lt;/td&gt;&#xA;          &lt;td&gt;ES + 本地存储，Prometheus（可选）&lt;/td&gt;&#xA;          &lt;td&gt;不能常态运行，异常时触发运行&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;Event&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;异常事件驱动&lt;/td&gt;&#xA;          &lt;td&gt;常态运行&lt;/td&gt;&#xA;          &lt;td&gt;ES + 本地存储，Prometheus（可选）&lt;/td&gt;&#xA;          &lt;td&gt;常态运行，直接抓取上下文信息&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;Metrics&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;指标数据采集&lt;/td&gt;&#xA;          &lt;td&gt;被动采集&lt;/td&gt;&#xA;          &lt;td&gt;Prometheus 格式&lt;/td&gt;&#xA;          &lt;td&gt;监控系统性能指标&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Autotracing&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;类型&lt;/strong&gt;：异常事件驱动（tracing）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能&lt;/strong&gt;：自动跟踪系统异常状态，并在异常发生时再触发抓取现场上下文信息。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;特点&lt;/strong&gt;：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;当系统出现异常时，&lt;code&gt;autotracing&lt;/code&gt; 会自动触发，捕获相关的上下文信息。&lt;/li&gt;&#xA;&lt;li&gt;数据会实时上报到 ES 并存储在本地，便于后续分析和排查问题，也可通过 Prometheus 格式进行监控，便于统计和告警。&lt;/li&gt;&#xA;&lt;li&gt;适用于获取现场时性能开销较大的场景，例如检测到指标上升到一定阈值、上升速度过快再触发抓取。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;已集成&lt;/strong&gt;：cpu 异常使用跟踪（cpu idle）、D状态跟踪（dload）、容器内外部争抢（waitrate）、内存突发分配（memburst）、磁盘异常跟踪（iotracer）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Event&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;类型&lt;/strong&gt;：异常事件驱动（tracing）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能&lt;/strong&gt;：常态运行在系统上下文中，达到预设阈值直接抓取上下文信息。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;特点&lt;/strong&gt;：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;与 &lt;code&gt;autotracing&lt;/code&gt; 不同，&lt;code&gt;event&lt;/code&gt; 是常态运行，而不是在异常时再触发。&lt;/li&gt;&#xA;&lt;li&gt;数据同样会实时上报到 ES 并存储在本地，也可通过 Prometheus 格式进行监控。&lt;/li&gt;&#xA;&lt;li&gt;适合用于常态监控和实时分析，能够及时发现系统中的异常行为， &lt;code&gt;event&lt;/code&gt; 类型的采集对系统性能影响可忽略。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;已集成&lt;/strong&gt;：软中断异常（softirq）、内存异常分配（oom）、软锁定（softlockup）、D 状态进程（hungtask）、内存回收（memreclaim）、异常丢包（dropwatch）、网络入向延迟（net_rx_latency）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Metrics&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;类型&lt;/strong&gt;：指标数据采集。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能&lt;/strong&gt;：采集各子系统的性能指标数据。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;特点&lt;/strong&gt;：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;指标数据可以来自常规 procfs 采集，也可以从 &lt;code&gt;tracing&lt;/code&gt; (autotracing,event) 类型获取数据。&lt;/li&gt;&#xA;&lt;li&gt;以 Prometheus 格式输出，便于集成到 Prometheus 监控系统中。&lt;/li&gt;&#xA;&lt;li&gt;与 &lt;code&gt;tracing&lt;/code&gt; 类数据不同，&lt;code&gt;metrics&lt;/code&gt; 主要用于采集系统的性能指标，如 CPU 使用率、内存使用率、网络等。&lt;/li&gt;&#xA;&lt;li&gt;适合用于监控系统的性能指标，支持实时分析和长期趋势观察。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;已集成&lt;/strong&gt;：cpu (sys, usr, util, load, nr_running&amp;hellip;), memory（vmstat, memory_stat, directreclaim, asyncreclaim&amp;hellip;）, IO(d2c, q2c, freeze, flush&amp;hellip;), 网络（arp, socket mem, qdisc, netstat, netdev, socketstat&amp;hellip;）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;tracing-模式的多重用途&#34;&gt;Tracing 模式的多重用途&lt;a class=&#34;td-heading-self-link&#34; href=&#34;#tracing-%e6%a8%a1%e5%bc%8f%e7%9a%84%e5%a4%9a%e9%87%8d%e7%94%a8%e9%80%94&#34; aria-label=&#34;Heading self-link&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&#xA;&lt;p&gt;&lt;code&gt;autotracing&lt;/code&gt; 和 &lt;code&gt;event&lt;/code&gt; 都属于 &lt;strong&gt;tracing&lt;/strong&gt; 类数据采集模式，它们具备以下双重用途：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
